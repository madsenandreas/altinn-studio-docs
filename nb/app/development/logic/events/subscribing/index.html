<!DOCTYPE html>
<html lang="nb" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="How to set up event subscription in an app" />
<meta name="altinn_pagedir" class="elastic" content="app\development\logic\events\subscribing\" />
<meta name="altinn_title" class="elastic" content="Subscribing" />

<title>Subscribing – Altinn</title><link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/horsey.css" rel="stylesheet">
    <link href="/css/fortawesome.css" rel="stylesheet">
    <link href="/css/designsystem.css" rel="stylesheet"><link href="/css/theme.css" rel="stylesheet"><script src="/js/jquery-2.x.min.js"></script>
<link href="/css/custom.css" rel="stylesheet">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114303148-1"></script>
<script>
var host = window.location.hostname;
if(host != "localhost")
{
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114303148-1', { 'anonymize_ip': true });
}
</script><style>
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>
  </head>
  <body class="a-page" data-url="/nb/app/development/logic/events/subscribing/"><nav class="a-jumpnav">
  <ul class="no-decoration d-flex">
    <li><a class="sr-only sr-only-focusable" href="#content">Hopp til hovedinnholdet</a></li><li><a class="sr-only sr-only-focusable" href="#docsmenu">Hopp til hovedmeny</a></li></ul>
</nav>

<header class="a-header ">
  
  <div class="container">
    <div class="row">
      <div class="col-12">

        
        <nav class="a-globalNav " id="primary-nav">
          <a href="/nb/" class="a-globalNav-logo">
            <img src="/images/altinnstudio-logo-white.svg" alt="Altinn Studio logo" class="adocs-logo">
            <span class="sr-only">Til forsiden</span>
          </a>

          <button class="navbar-toggler d-md-none" type="button"><span class="sr-only">Vis/skjul meny</span></button>
          <div class="collapse navbar-toggleable-sm a-globalNav-main" id="exCollapsingNavbar2">
            <ul id="exCollapsingNavbar">
              <li class="d-md-none dropdown"><a class="nav-link dropdown-toggle a-languageSwitcher" aria-expanded="false" data-toggle="dropdown" aria-haspopup="true" href="#">
  Language
</a>
<div class="dropdown-menu a-dropdown-languages a-dropdownTriangle"><a aria-hidden="true" class="dropdown-item" href="/app/development/logic/events/subscribing/">
      <img src="/images/en.svg" class="a-iconLeft a-flag" alt="" />
      <p>
        <span class="a-h3">English</span><br><span>Most content is available in english.</span></p>
    </a><a aria-hidden="true" class="dropdown-item" href="/nb/app/development/logic/events/subscribing/">
      <img src="/images/nb.svg" class="a-iconLeft a-flag" alt="" />
      <p>
        <span class="a-h3">Bokmål ✓</span><br><span>Noe innhold er tilgjengelig på bokmål.</span></p>
    </a></div>
</li>
              <li>
                <a class="a-nav-link a-hvr-underline" href="/nb/app/">apps</a>
              </li>
              <li>
                <a class="a-nav-link a-hvr-underline" href="/nb/api/">api</a>
              </li>
              <li>
                <a class="a-nav-link a-hvr-underline" href="/nb/community/">community</a>
              </li>
              <li>
                <a class="a-nav-link a-hvr-underline " href="/nb/technology/">tech</a>
              </li>
            </ul>
          </div>

        </nav> 
        <ul class="nav nav-pills a-header-options" id="nav-list">
          <li class="nav-item dropdown d-none d-md-block"><a class="nav-link dropdown-toggle a-languageSwitcher" aria-expanded="false" data-toggle="dropdown" aria-haspopup="true" href="#">
  Language
</a>
<div class="dropdown-menu a-dropdown-languages a-dropdownTriangle"><a aria-hidden="true" class="dropdown-item" href="/app/development/logic/events/subscribing/">
      <img src="/images/en.svg" class="a-iconLeft a-flag" alt="" />
      <p>
        <span class="a-h3">English</span><br><span>Most content is available in english.</span></p>
    </a><a aria-hidden="true" class="dropdown-item" href="/nb/app/development/logic/events/subscribing/">
      <img src="/images/nb.svg" class="a-iconLeft a-flag" alt="" />
      <p>
        <span class="a-h3">Bokmål ✓</span><br><span>Noe innhold er tilgjengelig på bokmål.</span></p>
    </a></div>
</li>
        </ul>
      </div>
    </div> 
  </div> 
</header>
<div class="container pt-2 pt-md-3 pt-lg-5">
      <div class="adocs-scrollcontainer">
        <div class="row">
            <div class="col-sm-12"><nav id="sidebar" class=""><div class="highlightable">
    <div id="header-wrapper"><div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Søk...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script src="/js/lunr.min.js"></script>
<script src="/js/horsey.js"></script>
<script>
    var baseurl = "https:\/\/docs.altinn.studio\/";
    var language = "nb";
</script>
<script src="https://cdn.jsdelivr.net/npm/@elastic/app-search-javascript@8.4.1/dist/elastic_app_search.umd.min.js" integrity="sha256-lBVStH8hKdQM2xGo2BvLryEDqp8BXg86ABbUByBvZrk=" crossorigin="anonymous"></script>
<script src="/js/search.js"></script></div>
    <ul id="docsmenu" class="topics">
      <li class="dd-item">
        <a href="/nb/app/"><span>Lage apper</span><i class="fa fa-sort-down fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/getting-started/"><span>Kom i gang</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/getting-started/intro/"><span>Introduksjon</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/first-time-setup/"><span>Opprette bruker</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/dashboard/"><span>Dashboard</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/copy-app/"><span>Kopier app</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/create-app/"><span>Opprette app</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/migrate-services/"><span>Migrere tjenester</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/navigation/"><span>Navigasjon</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/getting-started/navigation/designer/"><span>Designer</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/getting-started/navigation/designer/ui-editor/"><span>UI editor</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/navigation/repos/"><span>Repos</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/navigation/code/"><span>Code</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/access-management/"><span>Tilganger</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/getting-started/access-management/apps/"><span>Apps</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/access-management/studio/"><span>Studio</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/getting-started/local-dev/"><span>Lokal utvikling</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/"><span>Introkurs</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/case/"><span>Case</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/modul1/"><span>Modul 1</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/modul2/"><span>Modul 2</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/modul3/"><span>Modul 3</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/modul4/"><span>Modul 4</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/modul5/"><span>Modul 5</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/modul6/"><span>Modul 6</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/modul7/"><span>Modul 7</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/app-dev-course/losningsforslag/"><span>Løsningsforslag</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/design/"><span>Design</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/design/insight/"><span>Innsiktsfase</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/prototype/"><span>Prototype</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/usertest/"><span>Brukertest</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/"><span>Retningslinjer</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/design-principles/"><span>Designprinsipper</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/link-to-app/"><span>Inngang til skjema</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/content/"><span>Innhold i skjema</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/consistency/"><span>Konsistens</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/"><span>UI-komponenter</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/title-and-paragraph/"><span>Tittel og avsnitt</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/button/"><span>Knapp og lenke</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/input/"><span>Input</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/date/"><span>Dato</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/checkbox/"><span>Avkrysningsboks</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/radiobutton/"><span>Radioknapp</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/select/"><span>Nedtrekksliste</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/helptext/"><span>Hjelpetekst</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/error-message/"><span>Feilmeldinger</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/file-upload/"><span>Filopplasting</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/components/picture-component/"><span>Bilde</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/tone-of-voice/"><span>Språk</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/design/guidelines/wcag/"><span>Tilgjengelighet</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/"><span>Utvikling</span><i class="fa fa-sort-down fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/data/"><span>Data</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/data/prefill/"><span>Preutfylling</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/data/prefill/config/"><span>Konfigurasjon</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/prefill/custom/"><span>Egendefinert</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/prefill/instantiation/"><span>Http post</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/data-model/"><span>Datamodell</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/data/data-model/data-models-tool/"><span>Datamodellering</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/data-model/app-datamodels/"><span>Apper</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/data-model/org-datamodels/"><span>Organisasjoner</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/data-model/altinn-2/"><span>Altinn 2</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/data-model/known-issues/"><span>Kjente feil</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/data-model/seres-migration/"><span>Sereserstatning</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/options/"><span>Kodelister</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/data/attachments/"><span>Vedlegg</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/"><span>Brukergrensesnitt</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/ux/components/"><span>Komponenter</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/ux/components/multipleselect/"><span>MultipleSelect</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/components/panel/"><span>Panel</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/components/printbutton/"><span>PrintButton</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/components/likert/"><span>Likert</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/components/listcomponent/"><span>Listekomponent</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/pages/"><span>Sider</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/ux/pages/navigation/"><span>Navigasjon</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/pages/tracks/"><span>Sporvalg</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/pages/summary/"><span>Oppsummering</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/pages/layout-sets/"><span>Flere skjema</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/fields/"><span>Felter</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/ux/fields/grouping/"><span>Gruppering</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/ux/fields/grouping/setup/"><span>Oppsett</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/fields/grouping/repeating/"><span>Repeterende</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/fields/grouping/alternatives/"><span>Innstillinger</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/fields/settings/"><span>Innstillinger</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/footer/"><span>Bunntekst</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/styling/"><span>Styling</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/images/"><span>Bilder</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/texts/"><span>Tekster</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/ux/texts/translation/"><span>Oversettelse av tekster</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/pdf/"><span>PDF</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/ux/pdf/local-development/"><span>Local development</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/ux/widgets/"><span>Widgets</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/"><span>Logikk</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/logic/events/"><span>App Events</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/logic/events/subscribing/"><span>Subscribing</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/generic/"><span>Generelt</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/services/"><span>Tjenester</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/dataprocessing/"><span>Dataprosessering</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/dynamic/"><span>Dynamikk</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/instantiation/"><span>Instansiering</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/calculation/"><span>Kalkuleringer</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/expressions/"><span>Uttrykk</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/logic/validation/"><span>Validering</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/"><span>Konfigurasjon</span><i class="fa fa-sort-down fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/messagebox/"><span>Meldingsboks</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/messagebox/presentationfields/"><span>Presentasjonsfelter</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/messagebox/hide_instances/"><span>Skjule instanser</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/"><span>Autorisasjon</span><i class="fa fa-sort-down fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/rules/"><span>Regelbibliotek</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/"><span>Veiledning</span><i class="fa fa-sort-down fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/roles_and_rights/"><span>Roller</span><i class="fa fa-sort-down fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/roles_and_rights/roles_altinn/"><span>Altinn Roller</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/roles_and_rights/roles_altinn/altinn_roles_administration/"><span>Administrator roller</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/roles_and_rights/roles_altinn/altinn_roles_persons/"><span>Personroller</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/roles_and_rights/roles_altinn/altinn_roles_enterprices/"><span>Virksomhetsroller</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/roles_and_rights/roles_er/"><span>ER-Roller</span></a></li><li class="dd-item">
          <a href="/nb/app/development/configuration/authorization/guidelines_authorization/roles_and_rights/roles_ske/">
            <span>SKE-roller</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authorization/guidelines_authorization/test_authorization_application/"><span>Testing</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/partytype/"><span>Aktørtyper</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/datafields/"><span>Datafelter</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/process/"><span>Prosess</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/process/auto-delete/"><span>Automatisk sletting</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/process/pre-post-hooks/"><span>Definer egendefinerte prosess hooks</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/process/exclusive-gateways/"><span>Exclusive Gateways</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/process/message/"><span>Melding</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/process/customize/"><span>Tilpasse visninger</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/queryparameters/"><span>Query parametere</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/secrets/"><span>Secrets</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/eformidling/"><span>eFormidling</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/events/"><span>Events</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/settings/"><span>Settings</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/startup/"><span>Startup</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/stateless/"><span>Stateless</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/deployment/"><span>Deployment</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/configuration/authentication/"><span>Autentisering</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/development/api/"><span>API</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/development/api/expose/"><span>Eksponere</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/api/instance/"><span>Instans</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/development/api/consume/"><span>Konsumere</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/testing/"><span>Testing</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/testing/local/"><span>Lokalt</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/testing/local/apitests/"><span>API tests</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/testing/local/apitests/org/"><span>Org</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/testing/local/apitests/user/"><span>Sluttbruker</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/testing/local/debug/"><span>Debugging</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/testing/local/testusers/"><span>Testbrukere</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/testing/deploy/"><span>I testmiljø</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/monitoring/"><span>Monitorering</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/monitoring/prerequisites/"><span>Forutsetninger</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/monitoring/faq/"><span>FAQ</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/monitoring/references/"><span>Ressurser</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/deployment/"><span>Produksjonssetting</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/deployment/runtime-environment/"><span>Kjøremiljø</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/deployment/runtime-environment/resource-allocation/"><span>Ressurserfordeling</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/deployment/runtime-environment/resource-allocation-tips/"><span>Tips til ressurserfordeling</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/maintainance/"><span>Vedlikehold</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/maintainance/dependencies/"><span>Avhengigheter</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/app/launched-apps/"><span>Lanserte tjenester</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/launched-apps/digdir/"><span>Digdir</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/app/launched-apps/digdir/bli-tjenesteeier/"><span>Bli tjenesteeier</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/launched-apps/digdir/godkjenn-bruksvilkaar/"><span>Godkjenn bruksvilkår</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/launched-apps/digdir/oed/"><span>Oppgjør etter dødsfall</span></a></li>
      <li class="dd-item">
        <a href="/nb/app/launched-apps/digdir/be-om-api-nokkel/"><span>Tilgang til REST API</span></a></li></ul></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/"><span>API</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/apps/"><span>App</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/apps/metadata/"><span>Metadata</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/instances/"><span>Instanser</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/data-elements/"><span>Data-elementer</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/apps/data-elements/tags/"><span>Tags</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/apps/stateless-data-elements/"><span>Tilstandsløse data</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/process/"><span>Prosess</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/validation/"><span>Validering</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/"><span>Authentication</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/maskinporten/"><span>Maskinporten</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/enterpriseuser/"><span>Virksomhetsbruker</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/id-porten/"><span>ID-porten</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/delegate-scopes/"><span>Delegere API-tilganger</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/events/"><span>Events</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/events/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/models/"><span>Modeller</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/models/app-metadata/"><span>App metadata</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/models/instance/"><span>Instance</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/models/data-element/"><span>DataElement</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/scenarios/"><span>Scenarier</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/scenarios/authentication/"><span>Autentisering</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/storage/"><span>Storage</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/storage/instances/"><span>Instanser</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/storage/instance-events/"><span>Instance events</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/storage/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/studio/"><span>Studio</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/"><span>Community</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/about/"><span>Om</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/about/open-source/"><span>Åpen kildekode</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/about/goals/"><span>Mål</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/contributing/"><span>Bidra til utvikling</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/contributing/propose-component/"><span>Foreslå en ny komponent</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/contributing/develop-component/"><span>Utvikle en komponent</span></a></li><li class="dd-item">
          <a href="/nb/community/contributing/intro/">
            <span>Intro for utviklere</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/contributing/handbook/"><span>Håndbok</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/"><span>Endringslogg</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-frontend/"><span>App frontend</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-frontend/v3/"><span>v3</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-frontend/v3/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-frontend/v3/whats-new/"><span>Hva er nytt?</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/"><span>App nuget</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v7/"><span>v7</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v7/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v7/whats-new/"><span>Hva er nytt?</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v6/"><span>v6</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v6/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v6/whats-new/"><span>Hva er nytt?</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v5/"><span>v5</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v5/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v5/whats-new/"><span>Hva er nytt?</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v4/"><span>v4</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v4/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v4/whats-new/"><span>Hva er nytt?</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v3/"><span>v3</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v3/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/app-nuget/v3/whats-new/"><span>Hva er nytt?</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/"><span>Deployment</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/migration/"><span>Migrering</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/v1/"><span>v1</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/v1/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/v1/whats-new/"><span>Hva er nytt</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/v2/"><span>v2</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/v2/breaking-changes/"><span>Breaking changes</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/deployment/v2/whats-new/"><span>Hva er nytt</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/storage-interfaces/"><span>Storage Interface</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/changelog/storage-interfaces/v3/"><span>v3</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/changelog/storage-interfaces/v2/"><span>v2</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/roadmap/"><span>Roadmap</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/devops/"><span>DevOps</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/devops/definition-of-ready/"><span>Definition of Ready</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/devops/roadmapprocess/"><span>Roadmap prosess</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/devops/teams/"><span>Teams</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/devops/teams/apps/"><span>Apps</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/devops/teams/authorization/"><span>Autorisasjon</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/community/devops/teams/authorization/designfrontendprocess/"><span>Desgin/Frontend prosess</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/devops/teams/platform/"><span>Platform</span></a></li>
      <li class="dd-item">
        <a href="/nb/community/devops/teams/studio/"><span>Studio</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/community/presentations/"><span>Presentasjoner</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/technology/"><span>Teknologi</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/technology/solutions/"><span>Løsningene</span></a></li></ul></li></ul>
  </div>
</nav>

<script>
          $("li.dd-item a[href='/nb/app/']").parent().addClass("parent");
 $("li.dd-item a[href='/nb/app/development/']").parent().addClass("parent");
 $("li.dd-item a[href='/nb/app/development/logic/']").parent().addClass("parent");
 $("li.dd-item a[href='/nb/app/development/logic/events/']").parent().addClass("parent");
 $("li.dd-item a[href='/nb/app/development/logic/events/subscribing/']").parent().addClass("active");
        </script>
        <section id="body">
          <div id="content" class="adocs-content js-moveChildrenTo">
        <div id="overlay"></div>
        <div class="a-text"><div id="top-bar">
            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span" class="adocs-sidebarToggle">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                    <span class="sr-only">Vis/skjul meny</span>
                  </a>
                </span>
                <span class="links"><a href='/nb/app/'>Lage apper</a> <span class='adocs-breadcrumb-divider'> / </span> <a href='/nb/app/development/'>Utvikling</a> <span class='adocs-breadcrumb-divider'> / </span> <a href='/nb/app/development/logic/'>Logikk</a> <span class='adocs-breadcrumb-divider'> / </span> <a href='/nb/app/development/logic/events/'>App Events</a> <span class='adocs-breadcrumb-divider'> / </span> Subscribing</span>
            </div>
          </div><div id="tags"><a class="label label-default" href="https://docs.altinn.studio/tags/translate-to-norwegian">translate-to-norwegian</a></div><div id="body-inner"><h1 class="a-fontBold">Subscribing</h1>
              <p class="a-leadText" id="leadText">How to set up event subscription in an app</p><h2 id="subscribing-to-events">Subscribing to events</h2>
<p>In order to receive events in the application you need create a subscription. While you can create a subscription authenticated as a user, most scenarios will probably be to authenticate as the organization owning the application, and to create the subscription as part of the startup process of the application. This example covers authenticating as an organization through maskinporten.</p>
<div class="notices warning" >You should first make sure you have a client definition registered in Maskinporten for your application. See <a href="/api/authentication/maskinporten">Authenticating with Maskinporten</a> on how register a client.</div>
<h2 id="configuring-maskinporten-integration">Configuring Maskinporten integration</h2>
<p>Even though we are authenticating through maskinporten, we can&rsquo;t use the received token directly since Altinn Events only supports an Altinn token. To solve this we need to exchange the Maskinporten token into an Altinn token. The example below adds a message handler to the EventsSubscriptionClient used to communicate with Maskinporten. This handler automatically requests a token from Maskinporten, exchanges it to an Altinn token and adds the token to the request to the Event System when creating a subscription.</p>
<p>This code should be added to <em>Program.cs</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>services.AddMaskinportenHttpClient&lt;MaskinportenClientDefinition, EventsSubscriptionClient&gt;(
</span></span><span style="display:flex;"><span>    config.GetSection(<span style="color:#f1fa8c">&#34;MaskinportenSettings&#34;</span>), clientDefinition =&gt;
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        clientDefinition.ClientSettings.Scope = <span style="color:#f1fa8c">&#34;altinn:serviceowner/instances.read&#34;</span>;
</span></span><span style="display:flex;"><span>        clientDefinition.ClientSettings.ExhangeToAltinnToken = <span style="color:#ff79c6">true</span>;
</span></span><span style="display:flex;"><span>    }).AddTypedClient&lt;IEventsSubscription, EventsSubscriptionClient&gt;();
</span></span></code></pre></div><p>Scope and ExchangeToAltinnToken need to be configured in code and not in <em>AppSettings.json</em> if you have multiple external dependencies that requires the use of Maskinporten. This is to avoid scopes belonging to one external api being sent to another api. Some api&rsquo;s accept this while others will reject the request due to unknown scopes. It&rsquo;s also best practice not to leak unnecessary scopes to other api&rsquo;s that don&rsquo;t require it to avoid token misuse.</p>
<div class="notices info" >The <code>MaskinportenClientDefinition</code> in the example above is a custom implementation of <code>IClientDefinition</code> from the nuget package <a href="https://github.com/Altinn/altinn-apiclient-maskinporten">Altinn.ApiClients.Maskinporten</a> which is included as a part of the <code>Altinn.App.Core</code> package. If you don&rsquo;t need a custom implementation you can use one of the <a href="https://github.com/Altinn/altinn-apiclient-maskinporten">built in client definitions</a>.</div>
<p>Depending on what type of ClientDefintion you use you typically need to specify either a certificate file and password, encoded jwk, encoded x509 certificate or enterprise username/password in order to authenticate with Maskinporten in addition to the environment and client id. These can be shared between the various integrations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>  <span style="color:#f1fa8c">&#34;MaskinportenSettings&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;Environment&#34;</span>: <span style="color:#f1fa8c">&#34;ver2&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;ClientId&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;CertificatePkcs12Path&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;CertificatePkcs12Password&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>Here is a <a href="https://github.com/Altinn/altinn-apiclient-maskinporten/blob/main/src/Altinn.ApiClients.Maskinporten/Config/MaskinportenSettings.cs">C# class of the settings available</a> for reference.</p>
<h3 id="protecting-the-event-endpoint-with-a-secret">Protecting the event endpoint with a secret</h3>
<p>Receving events in the application is based on exposing a webhook endpoint to which the Event Service posts the event. Upon receiving an event, the application validates if a secret is provided before accepting the event. The secret  is provided by implementing the <code>IEventSecretCodeProvider</code> interface. By default there is an example implementation in place using a key from the key vault using a key with the name <code>EventSubscription--SecretCode</code> in the key vault the value of that key is used. You should hover not use the same key/value for multiple applications so it&rsquo;s recomended to create your own implementation.</p>
<div class="notices info" >Note that the return url and the secret code is part of the subscription definition. This means that if you rotate the key, you should remove the existing subscription first, or else you will have two active subscriptions for the same events.</div>
<h3 id="create-subscription">Create subscription</h3>
<p>Once you have your client registered with Maskinporten, your config setup, your ClientDefinition in place and your webhook secret defined - you are ready to add the code required to make a subscription.</p>
<p>The example below is using the <code>IHostedService</code> from Microsoft which, in this case, run once after the services are registered in the container, but before the application is configured.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#ff79c6">using</span> Altinn.App.Core.Infrastructure.Clients.Events;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">using</span> Altinn.App.Core.Internal.Events;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">using</span> Altinn.App.Core.Models;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">using</span> Microsoft.Extensions.Hosting;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">using</span> Microsoft.Extensions.Logging;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">namespace</span> Altinn.App.Core.EFormidling
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/// Hosted service to set up prequisites for Eformidling integration.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">public</span> <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">EformidlingStartup</span> : IHostedService
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">readonly</span> AppIdentifier _appIdentifier;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">readonly</span> IEventsSubscription _eventsSubscriptionClient;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">private</span> <span style="color:#ff79c6">readonly</span> ILogger&lt;EformidlingStartup&gt; _logger;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">/// Initializes a new instance of the &lt;see cref=&#34;EformidlingStartup&#34;/&gt; class.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">public</span> EformidlingStartup(AppIdentifier appId, IEventsSubscription eventsSubscriptionClient, ILogger&lt;EformidlingStartup&gt; logger)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            _appIdentifier = appId;
</span></span><span style="display:flex;"><span>            _eventsSubscriptionClient = eventsSubscriptionClient;
</span></span><span style="display:flex;"><span>            _logger = logger;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">///&lt;inheritDoc/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">public</span> <span style="color:#ff79c6">async</span> Task StartAsync(CancellationToken cancellationToken)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd">var</span> eventType = <span style="color:#f1fa8c">&#34;app.eformidling.reminder.checkinstancestatus&#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">try</span>
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                Subscription subscription = <span style="color:#ff79c6">await</span> _eventsSubscriptionClient.AddSubscription(_appIdentifier.Org, _appIdentifier.App, eventType);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                _logger.LogInformation(<span style="color:#f1fa8c">&#34;Successfully subscribed to event {eventType} for app {appIdentifier}. Subscription {subscriptionId} is being used.&#34;</span>, eventType, _appIdentifier, subscription.Id);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">catch</span> (Exception ex)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                _logger.LogError(<span style="color:#f1fa8c">&#34;Unable to subscribe to event {eventType} for app {appIdentifier}. Received exception {exceptionMessage} with {stackTrace}&#34;</span>, eventType, _appIdentifier, ex.Message, ex.StackTrace);
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">throw</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">/// &lt;inheritdoc/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">public</span> Task StopAsync(CancellationToken cancellationToken)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> Task.CompletedTask;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="notices " >If the hosted service fail to run succesfully, ie. throws an exception, the application will fail to start. If you don&rsquo;t won&rsquo;t this behavior you shold catch any exception and don&rsquo;t rethrow it.</div>


<footer class=" footline" ></footer>
                </div>
              </div>
              

            </div><div id="top-github-link">
                  <a class="" href="https://github.com/altinn/altinn-studio-docs/blob/master/content/app/development/logic/events/subscribing/_index.nb.md" target="blank">
                    <i class="fa fa-code-fork"></i>
                    Endre denne siden i GitHub
                  </a>
                </div></section>
        </div> 
      </div> 
    </div>
    </div> <footer class="adocs-footer">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <ul>
                    <li>
                        <a href="https://www.altinn.no/om-altinn/">Om Altinn</a>
                    </li>
                    <li>
                        <a href="https://github.com/Altinn/altinn-studio/issues">Backlog</a>
                    </li>
                    <li>
                        <a href="https://altinn.slack.com">Slack</a>
                    </li>
                    <li>
                        <a href="https://github.com/Altinn/altinn-studio">GitHub</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/altinninfoportal.js"></script>
    <script src="/js/altinndocs.js"></script>
    <script src="/js/altinndocs-learn.js"></script>
    <script src="/js/stickysidebar/rAF.js"></script>
    <script src="/js/stickysidebar/ResizeSensor.js"></script>
    <script src="/js/stickysidebar/sticky-sidebar.js"></script>

    <script>
      var a = new StickySidebar('#sidebar', {
        topSpacing: 20,
        bottomSpacing: 60,
        containerSelector: '.adocs-scrollcontainer',
        innerWrapperSelector: '.sidebar__inner',
        minWidth: 768
      });
    </script>
    <link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
<script src="/js/custom.js"></script></body>
</html>

